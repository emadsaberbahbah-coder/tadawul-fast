# =============================================================================
# requirements.txt
# =============================================================================
# TADAWUL FAST BRIDGE – ENTERPRISE DEPENDENCY SPECIFICATION (v2.8.0)
# =============================================================================
# Production-Grade Python Dependencies for Financial API Platform
#
# Architecture
# ┌─────────────────────────────────────────────────────────────┐
# │                    Core Framework                           │
# │  FastAPI, Uvicorn, Pydantic, Starlette                     │
# └─────────────────────────────────────────────────────────────┘
#                              │
#              ┌───────────────┼───────────────┐
#              ▼               ▼               ▼
#   ┌─────────────────┐ ┌─────────────┐ ┌─────────────────┐
#   │ Data Providers  │ │  Security   │ │  Performance    │
#   │ yfinance, pandas│ │ slowapi,    │ │ uvloop, orjson  │
#   │ numpy, scipy    │ │ authlib     │ │ httptools       │
#   └─────────────────┘ └─────────────┘ └─────────────────┘
#              │               │               │
#              └───────────────┼───────────────┘
#                              ▼
#   ┌─────────────────────────────────────────────────────────┐
#   │                  Integrations                            │
#   │  Google Sheets, Redis, PostgreSQL, Kafka, Elasticsearch  │
#   └─────────────────────────────────────────────────────────┘
#
# Design Principles
# • Version Pinning: EXACT versions for production reproducibility
# • Platform-Specific: Conditional dependencies for Linux/Windows
# • Optional Groups: Extras for development, testing, monitoring
# • Security: Regular updates for vulnerability patches
# • Compatibility: Python 3.11+ optimized
# • Size Optimization: Minimal production footprint
#
# Version: 2.8.0
# Last Updated: 2024-03-20
# Python: >=3.11, <3.13
# Platform: Linux (Render), macOS, Windows (dev only)
# =============================================================================

# =============================================================================
# CORE WEB FRAMEWORK
# =============================================================================
# FastAPI – Modern web framework
fastapi==0.115.0

# Uvicorn – ASGI server with performance optimizations
uvicorn[standard]==0.30.1

# Starlette – ASGI toolkit (FastAPI dependency)
starlette==0.37.2

# Python-multipart – Form data parsing
python-multipart==0.0.9

# Pydantic – Data validation (v2)
pydantic==2.7.1
pydantic-settings==2.3.0
pydantic-core==2.18.2

# Typing extensions for older Python versions
typing-extensions==4.11.0

# =============================================================================
# ASGI/WEB SERVERS (PRODUCTION)
# =============================================================================
# Gunicorn – Multi-worker WSGI/ASGI server (production)
gunicorn==21.2.0

# Uvicorn workers for Gunicorn
uvicorn-worker==0.2.0

# Daphne – Alternative ASGI server (fallback)
daphne==4.1.2

# =============================================================================
# PERFORMANCE OPTIMIZATIONS
# =============================================================================
# uvloop – Fast, drop-in replacement for asyncio event loop (Linux/macOS)
uvloop==0.19.0; sys_platform != "win32"

# httptools – Fast HTTP parser (Linux/macOS)
httptools==0.6.1; sys_platform != "win32"

# orjson – Ultra-fast JSON serialization
orjson==3.10.3

# python-rapidjson – Alternative fast JSON
python-rapidjson==1.20

# ciso8601 – Fast ISO datetime parsing
ciso8601==2.3.1; sys_platform != "win32"

# aiodns – Fast DNS resolution for aiohttp
aiodns==3.2.0; sys_platform != "win32"

# =============================================================================
# RATE LIMITING & SECURITY
# =============================================================================
# SlowAPI – Rate limiting middleware
slowapi==0.1.9

# limits – Core rate limiting library
limits==3.12.0

# Authlib – OAuth and JWT handling
authlib==1.3.0

# python-jose – JWT encoding/decoding
python-jose[cryptography]==3.3.0

# passlib – Password hashing
passlib[bcrypt]==1.7.4

# bcrypt – Password hashing backend
bcrypt==4.1.2

# cryptography – Cryptographic operations
cryptography==42.0.5

# pyOpenSSL – SSL/TLS utilities
pyOpenSSL==24.1.0

# =============================================================================
# HTTP CLIENTS & NETWORKING
# =============================================================================
# httpx – Async HTTP client with HTTP/2 support
httpx==0.27.0
httpcore==1.0.5
h2==4.1.0  # HTTP/2 support

# requests – Sync HTTP client (legacy)
requests==2.31.0

# aiohttp – Async HTTP client/server
aiohttp==3.9.5

# aiofiles – Async file operations
aiofiles==23.2.1

# websockets – WebSocket client/server
websockets==12.0

# tenacity – Retry library with decorators
tenacity==8.2.3

# backoff – Exponential backoff for retries
backoff==2.2.1

# =============================================================================
# DATA PROVIDERS & FINANCIAL LIBRARIES
# =============================================================================
# yfinance – Yahoo Finance data
yfinance==0.2.40

# pandas – Data analysis and manipulation
pandas==2.2.2

# numpy – Scientific computing
numpy==1.26.4

# scipy – Scientific computing
scipy==1.13.0

# pandas-ta – Technical indicators (via fork)
ft-pandas-ta==0.3.16

# ta – Alternative technical indicators
ta==0.10.2

# pandas-market-calendars – Exchange calendars
pandas-market-calendars==4.3.1

# exchange-calendars – Trading calendars
exchange-calendars==4.5.1

# =============================================================================
# PARSING & DATA EXTRACTION
# =============================================================================
# BeautifulSoup4 – HTML parsing
beautifulsoup4==4.12.3

# lxml – Fast XML/HTML parser
lxml==5.2.1

# html5lib – HTML5-compliant parser
html5lib==1.1

# feedparser – RSS/Atom feed parsing
feedparser==6.0.10

# markdown – Markdown parsing
markdown==3.6

# pyquery – jQuery-like HTML parsing
pyquery==2.0.0

# =============================================================================
# GOOGLE CLOUD INTEGRATION - STRICT VERSION PINNING
# =============================================================================
# Google API Client
google-api-python-client==2.124.0

# Google Authentication
google-auth==2.29.0
google-auth-httplib2==0.2.0
google-auth-oauthlib==1.2.0

# Google API Core
google-api-core==2.18.0

# Google Cloud Secret Manager
google-cloud-secret-manager==2.19.0

# Google Cloud Storage
google-cloud-storage==2.14.0

# Google Sheets API (specific)
gspread==6.1.0
oauth2client==4.1.3

# =============================================================================
# DATABASE & CACHE INTEGRATIONS
# =============================================================================
# SQLAlchemy – ORM and database toolkit
sqlalchemy==2.0.29

# Alembic – Database migrations
alembic==1.13.1

# asyncpg – Async PostgreSQL driver
asyncpg==0.29.0

# psycopg2 – PostgreSQL adapter (sync)
psycopg2-binary==2.9.9

# redis – Redis client (sync)
redis==5.0.3

# aioredis – Redis client (async)
redis[hiredis]==5.0.3
hiredis==2.3.2

# aiocache – Async cache library
aiocache[redis]==0.12.2

# databases – Async database access
databases[postgresql]==0.9.0

# =============================================================================
# MESSAGE QUEUES & STREAMING
# =============================================================================
# aiokafka – Kafka client (async)
aiokafka==0.8.1

# aio-pika – RabbitMQ client (async)
aio-pika==9.3.0

# nats-py – NATS client
nats-py==2.6.0

# =============================================================================
# SEARCH & ANALYTICS
# =============================================================================
# elasticsearch – Elasticsearch client
elasticsearch==8.12.1

# elasticsearch-dsl – High-level Elasticsearch client
elasticsearch-dsl==8.12.0

# opensearch-py – OpenSearch client
opensearch-py==2.4.2

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# prometheus-client – Prometheus metrics
prometheus-client==0.20.0

# opentelemetry – Distributed tracing
opentelemetry-api==1.24.0
opentelemetry-sdk==1.24.0
opentelemetry-instrumentation-fastapi==0.45b0
opentelemetry-exporter-otlp==1.24.0

# sentry-sdk – Error tracking
sentry-sdk==2.0.1

# structlog – Structured logging
structlog==24.1.0

# python-json-logger – JSON logging
python-json-logger==2.0.7

# loguru – Alternative logging
loguru==0.7.2

# =============================================================================
# UTILITIES & OPTIMIZATION
# =============================================================================
# cachetools – Caching utilities
cachetools==5.3.3

# psutil – System and process utilities
psutil==5.9.8

# python-dateutil – Date parsing utilities
python-dateutil==2.9.0.post0

# pytz – Timezone handling
pytz==2024.1

# tzdata – IANA timezone database
tzdata==2024.1

# click – CLI interface
click==8.1.7

# typer – CLI with type hints
typer==0.12.0

# rich – Rich text formatting
rich==13.7.1

# jinja2 – Template engine
jinja2==3.1.3

# PyYAML – YAML parsing
pyyaml==6.0.1

# toml – TOML parsing
tomli==2.0.1; python_version < '3.11'
tomli-w==1.0.0

# =============================================================================
# ENVIRONMENT & CONFIGURATION
# =============================================================================
# python-dotenv – Environment variable loading
python-dotenv==1.0.1

# environs – Environment variable parsing
environs==11.0.0

# dynaconf – Multi-environment configuration
dynaconf==3.2.5

# =============================================================================
# ASYNCIO & CONCURRENCY
# =============================================================================
# anyio – Async compatibility layer
anyio==4.3.0

# sniffio – Async library detection
sniffio==1.3.1

# trio – Alternative async library
trio==0.24.0

# =============================================================================
# VALIDATION & SCHEMAS
# =============================================================================
# email-validator – Email validation
email-validator==2.1.0

# phonenumbers – Phone number validation
phonenumbers==8.13.39

# validators – Common data validators
validators==0.28.1

# =============================================================================
# ENCRYPTION & SECURITY
# =============================================================================
# python-jose – JWT handling
python-jose[cryptography]==3.3.0

# passlib – Password hashing
passlib[bcrypt]==1.7.4

# bcrypt – Password hashing backend
bcrypt==4.1.2

# cryptography – Cryptographic operations
cryptography==42.0.5

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
# Development dependencies (install with: pip install -e ".[dev]")
# -----------------------------------------------------------------------------
# pytest – Testing framework
pytest==8.1.1
pytest-asyncio==0.23.5
pytest-cov==5.0.0
pytest-xdist==3.5.0
pytest-mock==3.14.0

# hypothesis – Property-based testing
hypothesis==6.100.1

# factory-boy – Test fixtures
factory-boy==3.3.0

# faker – Fake data generation
faker==24.2.0

# httpx – HTTP client for testing
httpx==0.27.0

# requests-mock – Mock requests
requests-mock==1.11.0

# respx – Mock httpx
respx==0.21.1

# =============================================================================
# CODE QUALITY & LINTING (Dev)
# =============================================================================
# ruff – Fast linter and formatter
ruff==0.3.4

# mypy – Static type checking
mypy==1.9.0
types-requests==2.31.0.20240311
types-python-dateutil==2.9.0.20240316
types-pytz==2024.1.0.20240203
types-PyYAML==6.0.12.20240311

# black – Code formatter
black==24.3.0

# isort – Import sorter
isort==5.13.2

# pre-commit – Git hooks
pre-commit==3.6.2

# bandit – Security linter
bandit==1.7.7

# safety – Dependency vulnerability checker
safety==3.2.0

# =============================================================================
# DOCUMENTATION (Dev)
# =============================================================================
# mkdocs – Documentation generator
mkdocs==1.5.3
mkdocs-material==9.5.13
mkdocstrings==0.24.1
mkdocstrings-python==1.9.0

# =============================================================================
# PROFILING & DEBUGGING (Dev)
# =============================================================================
# py-spy – Sampling profiler
py-spy==0.3.14

# memray – Memory profiler
memray==1.12.0

# austin – Python frame stack sampler
austin-python==1.6.0

# icecream – Debug printing
icecream==2.1.3

# =============================================================================
# OPTIONAL EXTRAS
# =============================================================================
# These can be installed with: pip install -e ".[extra_name]"

# Machine Learning extras
# -----------------------------------------------------------------------------
# scikit-learn – Machine learning
scikit-learn==1.4.1.post1

# statsmodels – Statistical models
statsmodels==0.14.1

# prophet – Time series forecasting
prophet==1.1.5

# xgboost – Gradient boosting
xgboost==2.0.3

# lightgbm – Light gradient boosting
lightgbm==4.3.0

# Visualization extras
# -----------------------------------------------------------------------------
# matplotlib – Plotting library
matplotlib==3.8.3

# seaborn – Statistical visualizations
seaborn==0.13.2

# plotly – Interactive visualizations
plotly==5.20.0

# kaleido – Static image export for plotly
kaleido==0.2.1

# Notebook extras
# -----------------------------------------------------------------------------
# jupyter – Interactive notebooks
jupyter==1.0.0
ipykernel==6.29.3
ipywidgets==8.1.2

# =============================================================================
# PRODUCTION ONLY (Minimal Install)
# =============================================================================
# To install only production dependencies:
# pip install -r requirements.txt --no-deps
# pip install fastapi==0.115.0 uvicorn[standard]==0.30.1 gunicorn==21.2.0 \
#   pydantic==2.7.1 python-multipart==0.0.9 httpx==0.27.0 aiohttp==3.9.5 \
#   orjson==3.10.3 python-jose[cryptography]==3.3.0 passlib[bcrypt]==1.7.4 \
#   redis==5.0.3 asyncpg==0.29.0 google-api-python-client==2.124.0 \
#   google-auth==2.29.0 prometheus-client==0.20.0 sentry-sdk==2.0.1 \
#   python-json-logger==2.0.7 cachetools==5.3.3 psutil==5.9.8

# =============================================================================
# PLATFORM-SPECIFIC NOTES
# =============================================================================
# Linux (Render):
#   All packages work natively. uvloop and httptools provide maximum performance.
#
# macOS (Development):
#   uvloop and httptools work, but may need brew install for some dependencies.
#
# Windows (Development):
#   uvloop and httptools are excluded via sys_platform guards.
#   Use WSL2 for production-like environment.

# =============================================================================
# SECURITY UPDATES
# =============================================================================
# Regularly check for vulnerabilities:
#   pip install safety
#   safety check -r requirements.txt
#
# Update strategy:
#   Minor updates: Automated via dependabot
#   Major updates: Manual review required

# =============================================================================
# VERSION COMPATIBILITY MATRIX
# =============================================================================
# Python 3.11: Full support
# Python 3.12: Full support (as of March 2024)
# Python 3.13: Not yet tested
#
# FastAPI 0.115.0 requires Pydantic 2.7+
# Uvicorn 0.30.1 requires Python 3.8+
# SQLAlchemy 2.0.29 requires Python 3.7+

# =============================================================================
# DEPENDENCY GROUPS (for setup.py/pyproject.toml)
# =============================================================================
# [project]
# name = "tadawul-fast-bridge"
# version = "7.5.0"
# requires-python = ">=3.11"
# dependencies = [
#     # Core
#     "fastapi==0.115.0",
#     "uvicorn[standard]==0.30.1",
#     "pydantic==2.7.1",
#     # ... (list core dependencies)
# ]
#
# [project.optional-dependencies]
# dev = [
#     "pytest==8.1.1",
#     "ruff==0.3.4",
#     "mypy==1.9.0",
#     # ... (dev dependencies)
# ]
# ml = [
#     "scikit-learn==1.4.1.post1",
#     "xgboost==2.0.3",
# ]
# viz = [
#     "matplotlib==3.8.3",
#     "seaborn==0.13.2",
# ]
# notebook = [
#     "jupyter==1.0.0",
#     "ipykernel==6.29.3",
# ]
