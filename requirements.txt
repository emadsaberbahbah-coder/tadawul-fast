# requirements.txt
# Emad Bahbah Financial Engine – v2.1.1 (Render-stable, EODHD-safe, Forecast-ready)
# -------------------------------------------------------------------------------
# Goals:
# ✅ Stable pins for Render (Python 3.11+)
# ✅ Avoid common dependency drift + build failures
# ✅ Keep your current stack (Flask + gspread + pandas + prophet)
# ✅ Add ONLY what helps reliability (tenacity/backoff, pyjwt optional) — minimal

# =========================
# Web Server
# =========================
Flask==3.0.0
gunicorn==21.2.0

# =========================
# HTTP Client (robust)
# =========================
requests==2.31.0
urllib3==2.1.0

# Optional but helpful for graceful retries/backoff (very lightweight)
tenacity==8.3.0

# =========================
# Data & Math
# =========================
pandas==2.0.3
numpy==1.24.3

# =========================
# Forecasting (Prophet)
# =========================
prophet==1.1.5
cmdstanpy==1.2.0
stanio==0.3.0

# Prophet plotting sometimes tries plotly (your logs show it's missing).
# Not required for API, but to stop warnings & support optional plots:
plotly==5.22.0

# Matplotlib is a dependency of prophet; pin to reduce surprises.
matplotlib==3.10.8

# =========================
# Google Sheets
# =========================
gspread==5.12.0
gspread-formatting==1.1.2
google-auth==2.27.0
google-auth-oauthlib==1.2.3

# Strongly recommended by Google libs (often pulled indirectly, but pin for stability)
cachetools==5.5.2
rsa==4.9.1
pyasn1==0.6.1
pyasn1-modules==0.4.2

# =========================
# Env + Calendars
# =========================
python-dotenv==1.0.1
holidays==0.41
python-dateutil==2.9.0.post0
pytz==2025.2
tzdata==2025.3

# =========================
# Notes
# =========================
# If you want to REMOVE plotly warnings without adding plotly,
# you can delete the plotly line above and also remove any plotly import attempts.
#
# If EODHD returns 403 (Forbidden), it is NOT a dependency issue.
# It means the API token is invalid/expired/blocked. Fix via Render env var:
#   EODHD_API_TOKEN = <your real token>
