# =============================================================================
# requirements.txt
# =============================================================================
# TADAWUL FAST BRIDGE – ENTERPRISE DEPENDENCY SPECIFICATION (v2.12.0)
# =============================================================================
# Production-Grade Python Dependencies for Financial API Platform
#
# Version: 2.12.0
# Last Updated: 2024-03-21
# Python: >=3.11, <3.13
# Platform: Linux (Render), macOS, Windows (dev only)
# =============================================================================

# =============================================================================
# PROTOBUF - Using protobuf 4.25.8 for grpcio-status compatibility
# NOTE: austin-python has been removed as it requires protobuf~=3.12
# =============================================================================
protobuf==4.25.8

# =============================================================================
# CORE WEB FRAMEWORK
# =============================================================================
fastapi>=0.115.0,<0.116.0
uvicorn[standard]>=0.30.0,<0.31.0
starlette>=0.37.0,<0.38.0
python-multipart>=0.0.9,<0.0.10
pydantic>=2.7.0,<2.8.0
pydantic-settings>=2.3.0,<2.4.0
pydantic-core>=2.18.0,<2.19.0
typing-extensions>=4.11.0,<5.0.0

# =============================================================================
# ASGI/WEB SERVERS (PRODUCTION)
# =============================================================================
gunicorn>=21.2.0,<22.0.0
uvicorn-worker>=0.2.0,<0.3.0
daphne>=4.1.0,<5.0.0

# =============================================================================
# PERFORMANCE OPTIMIZATIONS
# =============================================================================
uvloop>=0.19.0,<0.20.0; sys_platform != "win32"
httptools>=0.6.1,<0.7.0; sys_platform != "win32"
orjson>=3.10.0,<4.0.0
python-rapidjson>=1.16,<2.0
ciso8601>=2.3.1,<3.0.0; sys_platform != "win32"
aiodns>=3.2.0,<4.0.0; sys_platform != "win32"

# =============================================================================
# RATE LIMITING & SECURITY
# =============================================================================
slowapi>=0.1.9,<0.2.0
limits>=3.12.0,<4.0.0
authlib>=1.3.0,<2.0.0
python-jose[cryptography]>=3.3.0,<4.0.0
passlib[bcrypt]>=1.7.4,<2.0.0
bcrypt>=4.1.0,<5.0.0
cryptography>=42.0.0,<43.0.0
pyOpenSSL>=24.1.0,<25.0.0

# =============================================================================
# HTTP CLIENTS & NETWORKING
# =============================================================================
httpx>=0.27.0,<0.28.0
httpcore>=1.0.0,<2.0.0
h2>=4.1.0,<5.0.0
requests>=2.31.0,<3.0.0
aiohttp>=3.9.0,<4.0.0
aiofiles>=23.2.0,<24.0.0
websockets>=12.0,<13.0
tenacity>=8.2.0,<9.0.0
backoff>=2.2.0,<3.0.0

# =============================================================================
# DATA PROVIDERS & FINANCIAL LIBRARIES
# =============================================================================
yfinance>=0.2.40,<0.3.0
pandas>=2.2.0,<3.0.0
numpy>=1.26.0,<2.0.0
scipy>=1.13.0,<2.0.0
ft-pandas-ta>=0.3.16,<0.4.0
ta>=0.10.2,<0.11.0
pandas-market-calendars>=4.3.0,<5.0.0
exchange-calendars>=4.5.0,<5.0.0

# =============================================================================
# PARSING & DATA EXTRACTION
# =============================================================================
beautifulsoup4>=4.12.0,<5.0.0
lxml>=5.2.0,<6.0.0
html5lib>=1.1,<2.0.0
feedparser>=6.0.0,<7.0.0
markdown>=3.3,<3.6  # Compatible with mkdocstrings-python
pyquery>=2.0,<3.0

# =============================================================================
# GOOGLE CLOUD INTEGRATION
# =============================================================================
google-api-python-client>=2.124.0,<2.125.0
google-auth>=2.29.0,<2.30.0
google-auth-httplib2>=0.2.0,<0.3.0
google-auth-oauthlib>=1.2.0,<1.3.0
google-api-core>=2.18.0,<2.19.0
google-api-core[grpc]>=2.18.0,<2.19.0
google-cloud-secret-manager>=2.19.0,<2.20.0
google-cloud-storage>=2.14.0,<2.15.0
gspread>=6.1.0,<6.2.0
oauth2client>=4.1.3,<4.2.0

# =============================================================================
# GRPC AND PROTOCOL BUFFERS
# =============================================================================
grpcio>=1.60.0,<1.61.0
grpcio-status>=1.60.0,<1.61.0
googleapis-common-protos>=1.62.0,<1.63.0
proto-plus>=1.23.0,<1.24.0

# =============================================================================
# DATABASE & CACHE INTEGRATIONS
# =============================================================================
sqlalchemy>=2.0.29,<2.1.0
alembic>=1.13.0,<1.14.0
asyncpg>=0.29.0,<0.30.0
psycopg2-binary>=2.9.9,<2.10.0
redis>=5.0.0,<5.1.0
redis[hiredis]>=5.0.0,<5.1.0
hiredis>=2.3.0,<2.4.0
aiocache[redis]>=0.12.0,<0.13.0
databases[postgresql]>=0.9.0,<0.10.0

# =============================================================================
# MESSAGE QUEUES & STREAMING
# =============================================================================
aiokafka>=0.8.0,<0.9.0
aio-pika>=9.3.0,<9.4.0
nats-py>=2.6.0,<2.7.0

# =============================================================================
# SEARCH & ANALYTICS
# =============================================================================
elasticsearch>=8.12.0,<8.13.0
elasticsearch-dsl>=8.12.0,<8.13.0
opensearch-py>=2.4.0,<2.5.0

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
prometheus-client>=0.20.0,<0.21.0
opentelemetry-api>=1.24.0,<1.25.0
opentelemetry-sdk>=1.24.0,<1.25.0
opentelemetry-instrumentation-fastapi>=0.45b0,<0.46b0
opentelemetry-exporter-otlp>=1.24.0,<1.25.0
opentelemetry-proto>=1.24.0,<1.25.0
sentry-sdk>=2.0.0,<2.1.0
structlog>=24.1.0,<24.2.0
python-json-logger>=2.0.0,<2.1.0
loguru>=0.7.0,<0.8.0

# =============================================================================
# UTILITIES & OPTIMIZATION
# =============================================================================
cachetools>=5.3.0,<5.4.0
psutil>=5.9.0,<5.10.0
python-dateutil>=2.9.0,<2.10.0
pytz>=2024.1,<2024.2
tzdata>=2024.1,<2024.2
click>=8.1.0,<8.2.0
typer>=0.12.0,<0.13.0
rich>=13.7.0,<13.8.0
jinja2>=3.1.0,<3.2.0
pyyaml>=6.0.1,<6.1.0
tomli>=2.0.0,<2.1.0; python_version < '3.11'
tomli-w>=1.0.0,<1.1.0

# =============================================================================
# ENVIRONMENT & CONFIGURATION
# =============================================================================
python-dotenv>=1.0.0,<1.1.0
environs>=11.0.0,<11.1.0
dynaconf>=3.2.0,<3.3.0

# =============================================================================
# ASYNCIO & CONCURRENCY
# =============================================================================
anyio>=4.3.0,<4.4.0
sniffio>=1.3.0,<1.4.0
trio>=0.24.0,<0.25.0

# =============================================================================
# VALIDATION & SCHEMAS
# =============================================================================
email-validator>=2.1.0,<2.2.0
phonenumbers>=8.13.0,<8.14.0
validators>=0.28.0,<0.29.0

# =============================================================================
# ENCRYPTION & SECURITY
# =============================================================================
python-jose[cryptography]>=3.3.0,<3.4.0
passlib[bcrypt]>=1.7.4,<1.8.0
bcrypt>=4.1.0,<4.2.0
cryptography>=42.0.0,<42.1.0

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
pytest>=8.1.0,<8.2.0
pytest-asyncio>=0.23.0,<0.24.0
pytest-cov>=5.0.0,<5.1.0
pytest-xdist>=3.5.0,<3.6.0
pytest-mock>=3.14.0,<3.15.0
hypothesis>=6.100.0,<6.101.0
factory-boy>=3.3.0,<3.4.0
faker>=24.0.0,<24.1.0
httpx>=0.27.0,<0.28.0
requests-mock>=1.11.0,<1.12.0
respx>=0.21.0,<0.22.0

# =============================================================================
# CODE QUALITY & LINTING (Dev)
# =============================================================================
ruff>=0.3.0,<0.4.0
mypy>=1.9.0,<1.10.0
types-requests>=2.31.0,<2.32.0
types-python-dateutil>=2.9.0,<2.10.0
types-pytz>=2024.1.0,<2024.2.0
types-PyYAML>=6.0.0,<6.1.0
black>=24.3.0,<24.4.0
isort>=5.13.0,<5.14.0
pre-commit>=3.6.0,<3.7.0
bandit>=1.7.0,<1.8.0
safety>=3.2.0,<3.3.0

# =============================================================================
# DOCUMENTATION (Dev)
# =============================================================================
mkdocs>=1.5.0,<1.6.0
mkdocs-material>=9.5.0,<9.6.0
mkdocstrings>=0.24.0,<0.25.0
mkdocstrings-python>=1.9.0,<1.10.0

# =============================================================================
# PROFILING & DEBUGGING (Dev)
# =============================================================================
py-spy>=0.3.14,<0.4.0
memray>=1.12.0,<1.13.0
# austin-python REMOVED - Requires protobuf~=3.12 which conflicts with protobuf 4.25.8
icecream>=2.1.0,<2.2.0

# =============================================================================
# OPTIONAL EXTRAS
# =============================================================================
# Machine Learning extras
scikit-learn>=1.4.0,<1.5.0
statsmodels>=0.14.0,<0.15.0
prophet>=1.1.0,<1.2.0
xgboost>=2.0.0,<2.1.0
lightgbm>=4.3.0,<4.4.0

# Visualization extras
matplotlib>=3.8.0,<3.9.0
seaborn>=0.13.0,<0.14.0
plotly>=5.20.0,<5.21.0
kaleido>=0.2.0,<0.3.0

# Notebook extras
jupyter>=1.0.0,<1.1.0
ipykernel>=6.29.0,<6.30.0
ipywidgets>=8.1.0,<8.2.0

# =============================================================================
# VERSION COMPATIBILITY MATRIX
# =============================================================================
# Python 3.11: Full support ✅
# Python 3.12: Full support ✅
# 
# Critical Compatibility Chains:
# ┌─────────────────────────────────────────────────────────────┐
# │ PROTOBUF (4.25.8) - CENTRALIZED PIN                        │
# │   ├── google-api-core (2.18.x) ✓                           │
# │   ├── google-cloud-secret-manager (2.19.x) ✓               │
# │   ├── opentelemetry-proto (1.24.x) ✓                       │
# │   └── grpcio-status (1.60.x) ✓                             │
# └─────────────────────────────────────────────────────────────┘

# =============================================================================
# CHANGE LOG
# =============================================================================
# v2.12.0 (2024-03-21)
# ──────────────────────────────────────────────────
# • REMOVED: austin-python - Requires protobuf~=3.12 which conflicts with 
#   protobuf 4.25.8 needed for grpcio-status
# 
# • FIXED: All protobuf conflicts resolved by standardizing on protobuf 4.25.8
