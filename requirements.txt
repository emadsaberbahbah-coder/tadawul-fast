# =============================================================================
# requirements.txt
# =============================================================================
# TADAWUL FAST BRIDGE - ENTERPRISE DEPENDENCY SPECIFICATION (v7.5.0)
# =============================================================================
# QUANTUM EDITION | HIGH-PERFORMANCE ASGI | FULL ML/DL STACK
# Version: 7.5.0
# Last Updated: 2026-02-21
# Python: >=3.11, <3.13
# Platform: Linux (Render), macOS, Windows (dev only)
# =============================================================================

# =============================================================================
# PROTOBUF & GRPC (CRITICAL ECOSYSTEM PINS)
# NOTE: Pinned strictly to 4.25.x for grpcio-status and google-api-core compat.
# =============================================================================
protobuf==4.25.8
grpcio>=1.60.0,<1.65.0
grpcio-status>=1.60.0,<1.65.0
googleapis-common-protos>=1.62.0,<1.65.0
proto-plus>=1.23.0,<1.25.0

# =============================================================================
# CORE WEB FRAMEWORK (Pydantic V2 Rust Core)
# =============================================================================
fastapi>=0.115.0,<0.116.0
uvicorn[standard]>=0.32.0,<0.33.0
starlette>=0.41.0,<0.42.0
python-multipart>=0.0.12,<0.0.15
pydantic>=2.9.0,<3.0.0
pydantic-settings>=2.5.0,<3.0.0
pydantic-core>=2.23.0,<3.0.0
typing-extensions>=4.12.0,<5.0.0

# =============================================================================
# ASGI / WEB SERVERS / CONCURRENCY (PRODUCTION)
# =============================================================================
gunicorn>=23.0.0,<24.0.0
uvicorn-worker>=0.2.0,<0.3.0
anyio>=4.6.0,<5.0.0

# =============================================================================
# PERFORMANCE OPTIMIZATIONS (C/Rust Compiled)
# =============================================================================
uvloop>=0.21.0,<0.22.0; sys_platform != "win32"
httptools>=0.6.4,<0.7.0; sys_platform != "win32"
orjson>=3.10.7,<4.0.0
python-rapidjson>=1.18,<2.0
ciso8601>=2.3.1,<3.0.0; sys_platform != "win32"
aiodns>=3.2.0,<4.0.0; sys_platform != "win32"
rapidfuzz>=3.9.0,<4.0.0  # Used for high-speed news deduplication

# =============================================================================
# RATE LIMITING & SECURITY
# =============================================================================
slowapi>=0.1.9,<0.2.0
limits>=3.13.0,<4.0.0
PyJWT>=2.9.0,<3.0.0  # Replaces python-jose for modern JWT handling
passlib[bcrypt]>=1.7.4,<2.0.0
bcrypt>=4.2.0,<5.0.0
cryptography>=43.0.0,<44.0.0
pyOpenSSL>=24.2.0,<25.0.0

# =============================================================================
# HTTP CLIENTS & NETWORKING
# =============================================================================
httpx>=0.27.2,<0.28.0
httpcore>=1.0.5,<2.0.0
h2>=4.1.0,<5.0.0
requests>=2.32.0,<3.0.0
aiohttp>=3.10.0,<4.0.0
aiofiles>=24.1.0,<25.0.0
websockets>=13.0,<14.0
tenacity>=9.0.0,<10.0.0
backoff>=2.2.0,<3.0.0

# =============================================================================
# DATA PROVIDERS & FINANCIAL LIBRARIES
# =============================================================================
yfinance>=0.2.43,<0.3.0
pandas>=2.2.3,<3.0.0
numpy>=1.26.4,<2.0.0  # Pinning <2.0.0 until fully stable across all ML libs
scipy>=1.14.0,<2.0.0
pandas-market-calendars>=4.4.0,<5.0.0
exchange-calendars>=4.5.0,<5.0.0

# =============================================================================
# MACHINE LEARNING, DEEP LEARNING & FORECASTING (Quantum Edition)
# =============================================================================
scikit-learn>=1.5.0,<1.6.0
xgboost>=2.1.0,<2.2.0
lightgbm>=4.5.0,<5.0.0
statsmodels>=0.14.4,<0.15.0
prophet>=1.1.5,<1.2.0
hmmlearn>=0.3.2,<0.4.0  # Used for Market Regime Detection
optuna>=4.0.0,<5.0.0    # Used for Scoring Weight Optimization
shap>=0.46.0,<0.47.0    # Used for ML Explainability
joblib>=1.4.2,<2.0.0

# PyTorch & Transformers for Deep Learning Sentiment/Forecasting
torch>=2.4.0,<2.6.0; sys_platform != "win32"
transformers>=4.44.0,<5.0.0
pytorch-forecasting>=1.0.0,<2.0.0

# =============================================================================
# NLP, PARSING & DATA EXTRACTION
# =============================================================================
nltk>=3.9.0,<4.0.0
beautifulsoup4>=4.12.3,<5.0.0
lxml>=5.3.0,<6.0.0
feedparser>=6.0.11,<7.0.0
googletrans==4.0.2  # Async translation for news intelligence (compatible with modern httpx)

# =============================================================================
# GOOGLE CLOUD INTEGRATION & SHEETS
# =============================================================================
google-api-python-client>=2.140.0,<3.0.0
google-auth>=2.34.0,<3.0.0
google-auth-httplib2>=0.2.0,<0.3.0
google-api-core>=2.19.0,<3.0.0
google-cloud-secret-manager>=2.20.0,<3.0.0
gspread>=6.1.2,<7.0.0

# =============================================================================
# DATABASE & DISTRIBUTED CACHE INTEGRATIONS
# =============================================================================
redis[hiredis]>=5.0.8,<6.0.0
hiredis>=3.0.0,<4.0.0
aiomcache>=0.8.2,<1.0.0
aiocache[redis,memcached]>=0.12.2,<0.13.0
sqlalchemy>=2.0.35,<2.1.0
asyncpg>=0.29.0,<0.31.0

# =============================================================================
# MONITORING, TRACING & OBSERVABILITY (OpenTelemetry)
# =============================================================================
prometheus-client>=0.20.0,<0.22.0
opentelemetry-api>=1.27.0,<1.28.0
opentelemetry-sdk>=1.27.0,<1.28.0
opentelemetry-instrumentation-fastapi>=0.48b0,<0.50b0
opentelemetry-exporter-otlp>=1.27.0,<1.28.0
sentry-sdk[fastapi]>=2.13.0,<3.0.0
structlog>=24.4.0,<25.0.0
loguru>=0.7.2,<0.8.0

# =============================================================================
# UTILITIES & CONFIGURATION
# =============================================================================
python-dotenv>=1.0.1,<1.1.0
pyyaml>=6.0.2,<7.0.0
tomli>=2.0.1,<3.0.0; python_version < "3.11"

# =============================================================================
# DEVELOPMENT, LOAD TESTING & QA (Optional for Production)
# =============================================================================
locust>=2.31.0,<3.0.0  # Included for built-in load testing routines
pytest>=8.3.2,<9.0.0
pytest-asyncio>=0.24.0,<0.25.0
pytest-cov>=5.0.0,<6.0.0
ruff>=0.6.0,<0.7.0
