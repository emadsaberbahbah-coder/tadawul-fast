services:
  - type: web
    name: tadawul-fast-bridge
    env: python
    plan: free
    autoDeploy: true

    buildCommand: pip install -r requirements.txt

    # Render expects the app to bind to $PORT
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT --proxy-headers --forwarded-allow-ips="*"

    healthCheckPath: /health

    envVars:
      - key: PYTHON_VERSION
        value: 3.11.9

      - key: APP_NAME
        value: Tadawul Fast Bridge
      - key: APP_ENV
        value: production
      - key: LOG_LEVEL
        value: INFO

      # Providers (adjust as you like)
      - key: ENABLED_PROVIDERS
        value: "fmp,yfinance"
      - key: PRIMARY_PROVIDER
        value: "fmp"
      - key: KSA_DISALLOW_EODHD
        value: "true"

      # Secrets (set these in Render dashboard as "Secret", not in YAML)
      # - EODHD_API_KEY
      # - FMP_API_KEY
      # - FINNHUB_API_KEY
      # - APP_TOKEN
      # - GOOGLE_SHEETS_CREDENTIALS
      # - DEFAULT_SPREADSHEET_ID
